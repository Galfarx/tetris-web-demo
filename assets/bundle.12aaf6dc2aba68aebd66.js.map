{"version":3,"sources":["webpack:///assets/bundle.12aaf6dc2aba68aebd66.js","webpack:///./src/config.js","webpack:///./src/extensions/Textbutton.js","webpack:///./src/Game.js","webpack:///./src/index.js","webpack:///./src/prefabs/Block.js","webpack:///./src/prefabs/Shape.js","webpack:///./src/states/Boot.js","webpack:///./src/states/Menu.js","webpack:///./src/states/Over.js","webpack:///./src/states/Play.js","webpack:///./src/states/Preload.js","webpack:///./src/states/index.js"],"names":["webpackJsonp","module","exports","__webpack_require__","Object","defineProperty","value","default","GAME_WIDTH","GAME_HEIGHT","BLOCK_SIDE_LENGTH","BOARD_WIDTH","BOARD_HEIGHT","NUMBER_OF_COLORS","COLOR_BLUE","COLOR_CYAN","COLOR_GREEN","COLOR_ORANGE","COLOR_PURPLE","COLOR_RED","COLOR_YELLOW","NUMBER_OF_BLOCKS_IN_SHAPE","NUMBER_OF_SHAPE_TYPES","NUMBER_OF_SHAPE_ORIENTATIONS","MOVE_DOWN","MOVE_RIGHT","MOVE_LEFT","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_phaser","_phaser2","obj","__esModule","TextButton","_Phaser$Button","_ref","game","x","y","asset","callback","callbackContext","overFrame","outFrame","downFrame","upFrame","label","style","this","_this","getPrototypeOf","anchor","setTo","text","Text","addChild","Button","_interopRequireDefault","_states","states","newObj","key","hasOwnProperty","_config","_config2","Game","_Phaser$Game","AUTO","keys","forEach","state","add","start","_Game","_Game2","window","Tetris","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","Block","color","sprite","newX","newY","newColor","spriteLocation","getSpriteLocation","destroy","ease","Easing","Quadratic","In","tween","to","_Block","_Block2","Shape","type","orientation","centerX","centerY","shape","blocks","isTweening","tweenCounter","onBlockOccupied","Signal","Math","floor","random","initBlocks","shapes","startingLocation","blockPosition","createBlock","canRotate","msg","newOrientation","moveBlock","isOnBoard","isOccupied","block","dispatch","board","direction","canMoveShape","_class","_Phaser$State","apply","arguments","stage","backgroundColor","scale","scaleMode","ScaleManager","SHOW_ALL","pageAlignHorizontally","pageAlignVertically","physics","startSystem","Physics","ARCADE","State","_Textbutton","_Textbutton2","_this2","title","world","font","fill","align","source","onInputUp","open","menuPanel","group","menu","_Shape","_Shape2","cursors","input","keyboard","createCursorKeys","shapesJSON","cache","getJSON","Array","j","turnLength","turnCounter","completedRows","isUpdatingAfterRowClear","nextShape","createRandomShape","activeShape","activate","moveShape","placeShapeInBoard","getCompleteRows","clearRow","promoteShapes","handleInput","updateTween","up","isDown","rotate","left","right","down","has","gameOver","remove","completeRows","isRowFull","push","row","actualRowToClear","alreadyShifted","clean","dropRowsAbove","load","spritesheet","image","json","_Boot","get","_Preload","_Menu","_Play","_Over"],"mappings":"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","file":"assets/bundle.12aaf6dc2aba68aebd66.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  GAME_WIDTH: 160,\n  GAME_HEIGHT: 256,\n\n  BLOCK_SIDE_LENGTH: 16,\n\n  BOARD_WIDTH: 10,\n  BOARD_HEIGHT: 16,\n\n  NUMBER_OF_COLORS: 7,\n  COLOR_BLUE: 0,\n  COLOR_CYAN: 1,\n  COLOR_GREEN: 2,\n  COLOR_ORANGE: 3,\n  COLOR_PURPLE: 4,\n  COLOR_RED: 5,\n  COLOR_YELLOW: 6,\n\n  NUMBER_OF_BLOCKS_IN_SHAPE: 4,\n  NUMBER_OF_SHAPE_TYPES: 7,\n  NUMBER_OF_SHAPE_ORIENTATIONS: 4,\n\n  MOVE_DOWN: 0,\n  MOVE_RIGHT: 1,\n  MOVE_LEFT: 2\n};\n\n/***/ }),\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TextButton = function (_Phaser$Button) {\n  _inherits(TextButton, _Phaser$Button);\n\n  function TextButton(_ref) {\n    var game = _ref.game,\n        x = _ref.x,\n        y = _ref.y,\n        asset = _ref.asset,\n        callback = _ref.callback,\n        callbackContext = _ref.callbackContext,\n        overFrame = _ref.overFrame,\n        outFrame = _ref.outFrame,\n        downFrame = _ref.downFrame,\n        upFrame = _ref.upFrame,\n        label = _ref.label,\n        style = _ref.style;\n\n    _classCallCheck(this, TextButton);\n\n    var _this = _possibleConstructorReturn(this, (TextButton.__proto__ || Object.getPrototypeOf(TextButton)).call(this, game, x, y, asset, callback, callbackContext, overFrame, outFrame, downFrame, upFrame));\n\n    _this.anchor.setTo(0.5);\n\n    _this.label = label;\n    _this.style = style;\n    _this.text = new _phaser2.default.Text(_this.game, 0, 0, _this.label, _this.style);\n    _this.text.anchor.setTo(0.5);\n\n    _this.addChild(_this.text);\n    return _this;\n  }\n\n  return TextButton;\n}(_phaser2.default.Button);\n\nexports.default = TextButton;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nvar _states = __webpack_require__(15);\n\nvar states = _interopRequireWildcard(_states);\n\nvar _config = __webpack_require__(1);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Game = function (_Phaser$Game) {\n  _inherits(Game, _Phaser$Game);\n\n  function Game() {\n    _classCallCheck(this, Game);\n\n    var _this = _possibleConstructorReturn(this, (Game.__proto__ || Object.getPrototypeOf(Game)).call(this, _config2.default.GAME_WIDTH, _config2.default.GAME_HEIGHT, _phaser2.default.AUTO, 'content', null));\n\n    Object.keys(states).forEach(function (state) {\n      return _this.state.add(state, states[state]);\n    });\n\n    _this.state.start('Boot');\n    return _this;\n  }\n\n  return Game;\n}(_phaser2.default.Game);\n\nexports.default = Game;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(2);\n\n__webpack_require__(3);\n\nvar _Game = __webpack_require__(6);\n\nvar _Game2 = _interopRequireDefault(_Game);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.Tetris = {\n  game: new _Game2.default()\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nvar _config = __webpack_require__(1);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Block = function () {\n  function Block() {\n    _classCallCheck(this, Block);\n\n    this.x = null;\n    this.y = null;\n    this.color = null;\n    this.sprite = null;\n  }\n\n  _createClass(Block, [{\n    key: 'createBlock',\n    value: function createBlock(newX, newY, newColor) {\n      this.x = newX;\n      this.y = newY;\n      this.color = newColor;\n\n      var spriteLocation = this.getSpriteLocation();\n\n      this.sprite = window.Tetris.game.add.sprite(spriteLocation.x, spriteLocation.y, 'block', this.color);\n    }\n  }, {\n    key: 'clean',\n    value: function clean() {\n      this.x = null;\n      this.y = null;\n      this.color = null;\n      this.sprite.destroy();\n      this.sprite = null;\n    }\n  }, {\n    key: 'getSpriteLocation',\n    value: function getSpriteLocation() {\n      var spriteX = this.x * _config2.default.BLOCK_SIDE_LENGTH;\n      var spriteY = this.y * _config2.default.BLOCK_SIDE_LENGTH;\n\n      return {\n        x: spriteX,\n        y: spriteY\n      };\n    }\n  }, {\n    key: 'moveBlock',\n    value: function moveBlock(newX, newY) {\n      this.x = newX;\n      this.y = newY;\n\n      var spriteLocation = this.getSpriteLocation();\n      var duration = 55;\n      var repeat = 0;\n      var ease = _phaser2.default.Easing.Quadratic.In;\n      var autoStart = false;\n      var delay = 0;\n      var yoyo = false;\n\n      this.tween = window.Tetris.game.add.tween(this.sprite).to(spriteLocation, duration, ease, autoStart, delay, repeat, yoyo);\n      this.tween.start();\n    }\n  }]);\n\n  return Block;\n}();\n\nexports.default = Block;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nvar _config = __webpack_require__(1);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _Block = __webpack_require__(8);\n\nvar _Block2 = _interopRequireDefault(_Block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Shape = function () {\n  function Shape() {\n    _classCallCheck(this, Shape);\n\n    this.type = null;\n    this.orientation = null;\n    this.color = null;\n    this.centerX = null;\n    this.centerY = null;\n\n    this.shape = null;\n    this.blocks = [];\n\n    this.isTweening = false;\n    this.tweenCounter = 0;\n\n    this.onBlockOccupied = new _phaser2.default.Signal();\n  }\n\n  _createClass(Shape, [{\n    key: 'createRandomShape',\n    value: function createRandomShape() {\n      this.type = Math.floor(Math.random() * _config2.default.NUMBER_OF_SHAPE_TYPES);\n      this.orientation = Math.floor(Math.random() * _config2.default.NUMBER_OF_SHAPE_ORIENTATIONS);\n      this.color = Math.floor(Math.random() * _config2.default.NUMBER_OF_COLORS);\n\n      this.initBlocks();\n    }\n  }, {\n    key: 'initBlocks',\n    value: function initBlocks() {\n      for (var i = 0; i < _config2.default.NUMBER_OF_BLOCKS_IN_SHAPE; i++) {\n        this.blocks[i] = new _Block2.default();\n      }\n    }\n  }, {\n    key: 'activate',\n    value: function activate() {\n      var newX = void 0;\n      var newY = void 0;\n      this.shape = window.Tetris.shapes[this.type];\n      this.centerX = this.shape.orientation[this.orientation].startingLocation.x;\n      this.centerY = this.shape.orientation[this.orientation].startingLocation.y;\n\n      for (var i = 0; i < this.blocks.length; i++) {\n        newX = this.centerX + this.shape.orientation[this.orientation].blockPosition[i].x;\n        newY = this.centerY + this.shape.orientation[this.orientation].blockPosition[i].y;\n        this.blocks[i].createBlock(newX, newY, this.color);\n      }\n    }\n  }, {\n    key: 'clearActive',\n    value: function clearActive() {\n      this.type = null;\n      this.orientation = null;\n      this.color = null;\n      this.centerX = null;\n      this.centerY = null;\n      this.blocks = null;\n    }\n  }, {\n    key: 'updateTween',\n    value: function updateTween() {\n      if (this.tweenCounter > 10) {\n        this.isTweening = false;\n        this.tweenCounter = 0;\n      }\n      this.tweenCounter++;\n    }\n  }, {\n    key: 'rotate',\n    value: function rotate() {\n      if (!this.canRotate()) {\n        var msg = {\n          msg: 'Cannot rotate active shape'\n        };\n        throw msg;\n      }\n\n      var newX = void 0;\n      var newY = void 0;\n      var newOrientation = (this.orientation + 1) % _config2.default.NUMBER_OF_SHAPE_ORIENTATIONS;\n\n      for (var i = 0; i < this.blocks.length; i++) {\n        newX = this.centerX + this.shape.orientation[newOrientation].blockPosition[i].x;\n        newY = this.centerY + this.shape.orientation[newOrientation].blockPosition[i].y;\n        this.blocks[i].moveBlock(newX, newY);\n      }\n      this.orientation = newOrientation;\n      this.isTweening = true;\n    }\n  }, {\n    key: 'canRotate',\n    value: function canRotate() {\n      if (this.isTweening) {\n        return false;\n      }\n\n      var newX = void 0;\n      var newY = void 0;\n      var newOrientation = (this.orientation + 1) % _config2.default.NUMBER_OF_SHAPE_ORIENTATIONS;\n\n      for (var i = 0; i < this.blocks.length; i++) {\n        newX = this.centerX + this.shape.orientation[newOrientation].blockPosition[i].x;\n        newY = this.centerY + this.shape.orientation[newOrientation].blockPosition[i].y;\n\n        if (!this.isOnBoard(newX, newY) || this.isOccupied(newX, newY)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'placeShapeInBoard',\n    value: function placeShapeInBoard() {\n      var block = void 0;\n\n      for (var i = 0; i < this.blocks.length; i++) {\n        block = this.blocks[i];\n        if (this.isOccupied(block.x, block.y)) {\n          this.onBlockOccupied.dispatch();\n        }\n        window.Tetris.board[block.y][block.x] = this.blocks[i];\n      }\n    }\n  }, {\n    key: 'moveShape',\n    value: function moveShape(direction) {\n      if (!this.canMoveShape(direction)) {\n        var msg = {\n          msg: 'Cannot move active shape in direction: ' + direction\n        };\n        throw msg;\n      }\n\n      var newX = void 0;\n      var newY = void 0;\n\n      for (var i = 0; i < this.blocks.length; i++) {\n        switch (direction) {\n          case _config2.default.MOVE_DOWN:\n            newX = this.blocks[i].x;\n            newY = this.blocks[i].y + 1;\n            break;\n          case _config2.default.MOVE_LEFT:\n            newX = this.blocks[i].x - 1;\n            newY = this.blocks[i].y;\n            break;\n          case _config2.default.MOVE_RIGHT:\n            newX = this.blocks[i].x + 1;\n            newY = this.blocks[i].y;\n            break;\n        }\n        this.blocks[i].moveBlock(newX, newY);\n      }\n\n      switch (direction) {\n        case _config2.default.MOVE_DOWN:\n          this.centerX += 0;\n          this.centerY += 1;\n          break;\n        case _config2.default.MOVE_LEFT:\n          this.centerX += -1;\n          this.centerY += 0;\n          break;\n        case _config2.default.MOVE_RIGHT:\n          this.centerX += 1;\n          this.centerY += 0;\n          break;\n      }\n    }\n  }, {\n    key: 'canMoveShape',\n    value: function canMoveShape(direction) {\n      var newX = void 0;\n      var newY = void 0;\n\n      for (var i = 0; i < this.blocks.length; i++) {\n        switch (direction) {\n          case _config2.default.MOVE_DOWN:\n            newX = this.blocks[i].x;\n            newY = this.blocks[i].y + 1;\n            break;\n          case _config2.default.MOVE_LEFT:\n            newX = this.blocks[i].x - 1;\n            newY = this.blocks[i].y;\n            break;\n          case _config2.default.MOVE_RIGHT:\n            newX = this.blocks[i].x + 1;\n            newY = this.blocks[i].y;\n            break;\n        }\n        if (!this.isOnBoard(newX, newY) || this.isOccupied(newX, newY)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'isOnBoard',\n    value: function isOnBoard(x, y) {\n      if (x >= 0 && y >= 0 && x < _config2.default.BOARD_WIDTH && y < _config2.default.BOARD_HEIGHT) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'isOccupied',\n    value: function isOccupied(x, y) {\n      if (window.Tetris.board[y][x] === null) {\n        return false;\n      }\n      return true;\n    }\n  }]);\n\n  return Shape;\n}();\n\nexports.default = Shape;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _class = function (_Phaser$State) {\n  _inherits(_class, _Phaser$State);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: 'init',\n    value: function init() {\n      this.game.stage.backgroundColor = '#000';\n      this.scale.scaleMode = _phaser2.default.ScaleManager.SHOW_ALL;\n      this.scale.pageAlignHorizontally = true;\n      this.scale.pageAlignVertically = true;\n\n      this.game.physics.startSystem(_phaser2.default.Physics.ARCADE);\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      this.state.start('Preload');\n    }\n  }]);\n\n  return _class;\n}(_phaser2.default.State);\n\nexports.default = _class;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nvar _Textbutton = __webpack_require__(5);\n\nvar _Textbutton2 = _interopRequireDefault(_Textbutton);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _class = function (_Phaser$State) {\n  _inherits(_class, _Phaser$State);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: 'init',\n    value: function init() {\n      this.game.stage.backgroundColor = '#000';\n      this.scale.scaleMode = _phaser2.default.ScaleManager.SHOW_ALL;\n      this.scale.pageAlignHorizontally = true;\n      this.scale.pageAlignVertically = true;\n\n      this.game.physics.startSystem(_phaser2.default.Physics.ARCADE);\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      var _this2 = this;\n\n      this.title = new _phaser2.default.Text(this.game, this.game.world.centerX, this.game.world.centerY - 40, 'Simple Tetris', {\n        font: '18px Verdana',\n        fill: 'white',\n        align: 'center'\n      });\n      this.title.anchor.setTo(0.5);\n\n      this.start = new _Textbutton2.default({\n        game: this.game,\n        x: this.game.world.centerX,\n        y: this.game.world.centerY,\n        asset: null,\n        overFrame: null,\n        outFrame: null,\n        downFrame: null,\n        upFrame: null,\n        label: 'Start',\n        style: {\n          font: '10px Verdana',\n          fill: 'white',\n          align: 'center'\n        }\n      });\n\n      this.source = new _Textbutton2.default({\n        game: this.game,\n        x: this.game.world.centerX,\n        y: this.game.world.centerY + 20,\n        asset: null,\n        overFrame: null,\n        outFrame: null,\n        downFrame: null,\n        upFrame: null,\n        label: 'View source code',\n        style: {\n          font: '10px Verdana',\n          fill: 'white',\n          align: 'center'\n        }\n      });\n\n      this.start.onInputUp.add(function () {\n        _this2.state.start('Play');\n      });\n\n      this.source.onInputUp.add(function () {\n        window.open('https://github.com/Galfarx/tetris-web-demo', '_blank');\n      });\n\n      this.menuPanel = this.add.group();\n      this.menuPanel.add(this.title);\n      this.menuPanel.add(this.start);\n      this.menuPanel.add(this.source);\n    }\n  }]);\n\n  return _class;\n}(_phaser2.default.State);\n\nexports.default = _class;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nvar _Textbutton = __webpack_require__(5);\n\nvar _Textbutton2 = _interopRequireDefault(_Textbutton);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _class = function (_Phaser$State) {\n  _inherits(_class, _Phaser$State);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: 'init',\n    value: function init() {\n      this.game.stage.backgroundColor = '#000';\n      this.scale.scaleMode = _phaser2.default.ScaleManager.SHOW_ALL;\n      this.scale.pageAlignHorizontally = true;\n      this.scale.pageAlignVertically = true;\n\n      this.game.physics.startSystem(_phaser2.default.Physics.ARCADE);\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      var _this2 = this;\n\n      this.title = new _phaser2.default.Text(this.game, this.game.world.centerX, this.game.world.centerY - 40, 'Game Over', {\n        font: '18px Verdana',\n        fill: 'white',\n        align: 'center'\n      });\n      this.title.anchor.setTo(0.5);\n\n      this.start = new _Textbutton2.default({\n        game: this.game,\n        x: this.game.world.centerX,\n        y: this.game.world.centerY,\n        asset: null,\n        overFrame: null,\n        outFrame: null,\n        downFrame: null,\n        upFrame: null,\n        label: 'Play again',\n        style: {\n          font: '10px Verdana',\n          fill: 'white',\n          align: 'center'\n        }\n      });\n\n      this.menu = new _Textbutton2.default({\n        game: this.game,\n        x: this.game.world.centerX,\n        y: this.game.world.centerY + 20,\n        asset: null,\n        overFrame: null,\n        outFrame: null,\n        downFrame: null,\n        upFrame: null,\n        label: 'Menu',\n        style: {\n          font: '10px Verdana',\n          fill: 'white',\n          align: 'center'\n        }\n      });\n\n      this.start.onInputUp.add(function () {\n        _this2.state.start('Play');\n      });\n\n      this.menu.onInputUp.add(function () {\n        _this2.state.start('Menu');\n      });\n\n      this.menuPanel = this.add.group();\n      this.menuPanel.add(this.title);\n      this.menuPanel.add(this.start);\n      this.menuPanel.add(this.menu);\n    }\n  }]);\n\n  return _class;\n}(_phaser2.default.State);\n\nexports.default = _class;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nvar _Shape = __webpack_require__(9);\n\nvar _Shape2 = _interopRequireDefault(_Shape);\n\nvar _config = __webpack_require__(1);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _class = function (_Phaser$State) {\n  _inherits(_class, _Phaser$State);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: 'init',\n    value: function init() {\n      this.cursors = this.game.input.keyboard.createCursorKeys();\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      window.Tetris.shapesJSON = this.game.cache.getJSON('shapes');\n      window.Tetris.shapes = window.Tetris.shapesJSON.shapes;\n\n      window.Tetris.board = new Array(_config2.default.BOARD_HEIGHT);\n      for (var i = 0; i < _config2.default.BOARD_HEIGHT; i++) {\n        window.Tetris.board[i] = new Array(this.BOARD_WIDTH);\n        for (var j = 0; j < _config2.default.BOARD_WIDTH; j++) {\n          window.Tetris.board[i][j] = null;\n        }\n      }\n\n      this.turnLength = 60;\n      this.turnCounter = 0;\n\n      this.completedRows = [];\n      this.isUpdatingAfterRowClear = false;\n\n      this.nextShape = new _Shape2.default();\n      this.nextShape.createRandomShape();\n\n      this.activeShape = new _Shape2.default();\n      this.activeShape.createRandomShape();\n      this.activeShape.activate();\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      if (this.turnCounter >= this.turnLength) {\n        if (this.activeShape !== null && this.activeShape.canMoveShape(_config2.default.MOVE_DOWN)) {\n          this.activeShape.moveShape(_config2.default.MOVE_DOWN);\n        } else {\n          this.activeShape.placeShapeInBoard();\n          this.completedRows = this.getCompleteRows();\n          if (this.completedRows.length > 0) {\n            this.clearRow(this.completedRows);\n            this.isUpdatingAfterRowClear = true;\n          } else {\n            this.promoteShapes();\n          }\n          this.completedRows = [];\n        }\n        this.turnCounter = 0;\n      } else if (this.isUpdatingAfterRowClear) {\n        if (this.turnCounter >= this.turnLength / 10) {\n          this.isUpdatingAfterRowClear = false;\n          this.promoteShapes();\n        } else {\n          this.turnCounter++;\n        }\n      } else {\n        this.handleInput();\n        this.turnCounter++;\n      }\n    }\n  }, {\n    key: 'handleInput',\n    value: function handleInput() {\n      if (this.activeShape.isTweening) {\n        this.activeShape.updateTween();\n      } else if (this.cursors.up.isDown) {\n        if (this.activeShape.canRotate()) {\n          this.activeShape.rotate();\n        }\n      } else if (this.cursors.left.isDown) {\n        if (this.activeShape.canMoveShape(_config2.default.MOVE_LEFT)) {\n          this.activeShape.moveShape(_config2.default.MOVE_LEFT);\n          this.activeShape.isTweening = true;\n        }\n      } else if (this.cursors.right.isDown) {\n        if (this.activeShape.canMoveShape(_config2.default.MOVE_RIGHT)) {\n          this.activeShape.moveShape(_config2.default.MOVE_RIGHT);\n          this.activeShape.isTweening = true;\n        }\n      } else if (this.cursors.down.isDown) {\n        this.turnCounter += this.turnLength / 5;\n      }\n    }\n  }, {\n    key: 'promoteShapes',\n    value: function promoteShapes() {\n      if (this.activeShape.onBlockOccupied.has(this.gameOver)) {\n        this.activeShape.onBlockOccupied.remove(this.gameOver);\n      }\n      this.activeShape = null;\n      this.activeShape = this.nextShape;\n      this.activeShape.onBlockOccupied.add(this.gameOver);\n      this.activeShape.activate();\n\n      this.nextShape = new _Shape2.default();\n      this.nextShape.createRandomShape();\n    }\n  }, {\n    key: 'getCompleteRows',\n    value: function getCompleteRows() {\n      var completeRows = [];\n\n      for (var i = 0; i < window.Tetris.board.length; i++) {\n        if (this.isRowFull(i)) {\n          completeRows.push(i);\n        }\n      }\n      return completeRows;\n    }\n  }, {\n    key: 'isRowFull',\n    value: function isRowFull(row) {\n      for (var i = 0; i < window.Tetris.board[row].length; i++) {\n        if (window.Tetris.board[row][i] === null) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'clearRow',\n    value: function clearRow(completedRows) {\n      var row = void 0;\n      var actualRowToClear = void 0;\n      var alreadyShifted = 0;\n\n      for (var i = completedRows.length - 1; i >= 0; i--) {\n        actualRowToClear = completedRows[i] + alreadyShifted;\n\n        row = window.Tetris.board[actualRowToClear];\n\n        for (var j = 0; j < row.length; j++) {\n          window.Tetris.board[actualRowToClear][j].clean();\n          window.Tetris.board[actualRowToClear][j] = null;\n        }\n        this.dropRowsAbove(actualRowToClear - 1);\n        alreadyShifted++;\n      }\n    }\n  }, {\n    key: 'dropRowsAbove',\n    value: function dropRowsAbove(row) {\n      var block = void 0;\n\n      for (var i = row; i >= 0; i--) {\n        for (var j = 0; j < window.Tetris.board[i].length; j++) {\n          block = window.Tetris.board[i][j];\n          if (block !== null) {\n            window.Tetris.board[i][j].moveBlock(block.x, block.y + 1);\n            window.Tetris.board[i + 1][j] = window.Tetris.board[i][j];\n            window.Tetris.board[i][j] = null;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'gameOver',\n    value: function gameOver() {\n      window.Tetris.game.state.start('Over');\n    }\n  }]);\n\n  return _class;\n}(_phaser2.default.State);\n\nexports.default = _class;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _phaser = __webpack_require__(0);\n\nvar _phaser2 = _interopRequireDefault(_phaser);\n\nvar _config = __webpack_require__(1);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _class = function (_Phaser$State) {\n  _inherits(_class, _Phaser$State);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: 'preload',\n    value: function preload() {\n      this.load.spritesheet('block', 'assets/blocks_spritesheet.png', _config2.default.BLOCK_SIDE_LENGTH, _config2.default.BLOCK_SIDE_LENGTH);\n      this.load.image('background', 'assets/background.png');\n\n      this.load.json('shapes', 'assets/shapes.json');\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      this.state.start('Menu');\n    }\n  }]);\n\n  return _class;\n}(_phaser2.default.State);\n\nexports.default = _class;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Boot = __webpack_require__(10);\n\nObject.defineProperty(exports, 'Boot', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Boot).default;\n  }\n});\n\nvar _Preload = __webpack_require__(14);\n\nObject.defineProperty(exports, 'Preload', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Preload).default;\n  }\n});\n\nvar _Menu = __webpack_require__(11);\n\nObject.defineProperty(exports, 'Menu', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Menu).default;\n  }\n});\n\nvar _Play = __webpack_require__(13);\n\nObject.defineProperty(exports, 'Play', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Play).default;\n  }\n});\n\nvar _Over = __webpack_require__(12);\n\nObject.defineProperty(exports, 'Over', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Over).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ })\n],[7]);\n\n\n// WEBPACK FOOTER //\n// assets/bundle.12aaf6dc2aba68aebd66.js","export default {\n  GAME_WIDTH: 160,\n  GAME_HEIGHT: 256,\n\n  BLOCK_SIDE_LENGTH: 16,\n\n  BOARD_WIDTH: 10,\n  BOARD_HEIGHT: 16,\n\n  NUMBER_OF_COLORS: 7,\n  COLOR_BLUE: 0,\n  COLOR_CYAN: 1,\n  COLOR_GREEN: 2,\n  COLOR_ORANGE: 3,\n  COLOR_PURPLE: 4,\n  COLOR_RED: 5,\n  COLOR_YELLOW: 6,\n\n  NUMBER_OF_BLOCKS_IN_SHAPE: 4,\n  NUMBER_OF_SHAPE_TYPES: 7,\n  NUMBER_OF_SHAPE_ORIENTATIONS: 4,\n\n  MOVE_DOWN: 0,\n  MOVE_RIGHT: 1,\n  MOVE_LEFT: 2,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","import Phaser from 'phaser';\n\nexport default class TextButton extends Phaser.Button {\n  constructor({ game, x, y, asset, callback, callbackContext,\n    overFrame, outFrame, downFrame, upFrame, label, style }) {\n    super(game, x, y, asset, callback, callbackContext,\n    overFrame, outFrame, downFrame, upFrame);\n\n    this.anchor.setTo(0.5);\n\n    this.label = label;\n    this.style = style;\n    this.text = new Phaser.Text(this.game, 0, 0, this.label, this.style);\n    this.text.anchor.setTo(0.5);\n\n    this.addChild(this.text);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extensions/Textbutton.js","import Phaser from 'phaser';\n\nimport * as states from './states';\nimport config from './config';\n\nexport default class Game extends Phaser.Game {\n\n  constructor() {\n    super(config.GAME_WIDTH, config.GAME_HEIGHT, Phaser.AUTO, 'content', null);\n\n    Object.keys(states).forEach(state => this.state.add(state, states[state]));\n\n    this.state.start('Boot');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Game.js","import 'pixi';\nimport 'p2';\nimport Game from './Game';\n\nwindow.Tetris = {\n  game: new Game(),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Phaser from 'phaser';\nimport config from '../config';\n\n\nexport default class Block {\n  constructor() {\n    this.x = null;\n    this.y = null;\n    this.color = null;\n    this.sprite = null;\n  }\n\n  createBlock(newX, newY, newColor) {\n    this.x = newX;\n    this.y = newY;\n    this.color = newColor;\n\n    const spriteLocation = this.getSpriteLocation();\n\n    this.sprite = window.Tetris.game.add.sprite(spriteLocation.x, spriteLocation.y, 'block', this.color);\n  }\n\n  clean() {\n    this.x = null;\n    this.y = null;\n    this.color = null;\n    this.sprite.destroy();\n    this.sprite = null;\n  }\n\n  getSpriteLocation() {\n    const spriteX = this.x * config.BLOCK_SIDE_LENGTH;\n    const spriteY = this.y * config.BLOCK_SIDE_LENGTH;\n\n    return {\n      x: spriteX,\n      y: spriteY,\n    };\n  }\n\n  moveBlock(newX, newY) {\n    this.x = newX;\n    this.y = newY;\n\n    const spriteLocation = this.getSpriteLocation();\n    const duration = 55;\n    const repeat = 0;\n    const ease = Phaser.Easing.Quadratic.In;\n    const autoStart = false;\n    const delay = 0;\n    const yoyo = false;\n\n    this.tween = window.Tetris.game.add.tween(this.sprite)\n    .to(spriteLocation, duration, ease, autoStart, delay, repeat, yoyo);\n    this.tween.start();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/prefabs/Block.js","import Phaser from 'phaser';\nimport config from '../config';\nimport Block from './Block';\n\nexport default class Shape {\n  constructor() {\n    this.type = null;\n    this.orientation = null;\n    this.color = null;\n    this.centerX = null;\n    this.centerY = null;\n\n    this.shape = null;\n    this.blocks = [];\n\n    this.isTweening = false;\n    this.tweenCounter = 0;\n\n    this.onBlockOccupied = new Phaser.Signal();\n  }\n\n  createRandomShape() {\n    this.type = Math.floor(Math.random() * config.NUMBER_OF_SHAPE_TYPES);\n    this.orientation = Math.floor(Math.random() * config.NUMBER_OF_SHAPE_ORIENTATIONS);\n    this.color = Math.floor(Math.random() * config.NUMBER_OF_COLORS);\n\n    this.initBlocks();\n  }\n\n  initBlocks() {\n    for (let i = 0; i < config.NUMBER_OF_BLOCKS_IN_SHAPE; i++) {\n      this.blocks[i] = new Block();\n    }\n  }\n\n  activate() {\n    let newX;\n    let newY;\n    this.shape = window.Tetris.shapes[this.type];\n    this.centerX = this.shape.orientation[this.orientation].startingLocation.x;\n    this.centerY = this.shape.orientation[this.orientation].startingLocation.y;\n\n    for (let i = 0; i < this.blocks.length; i++) {\n      newX = this.centerX + this.shape.orientation[this.orientation].blockPosition[i].x;\n      newY = this.centerY + this.shape.orientation[this.orientation].blockPosition[i].y;\n      this.blocks[i].createBlock(newX, newY, this.color);\n    }\n  }\n\n  clearActive() {\n    this.type = null;\n    this.orientation = null;\n    this.color = null;\n    this.centerX = null;\n    this.centerY = null;\n    this.blocks = null;\n  }\n\n  updateTween() {\n    if (this.tweenCounter > 10) {\n      this.isTweening = false;\n      this.tweenCounter = 0;\n    }\n    this.tweenCounter++;\n  }\n\n  rotate() {\n    if (!this.canRotate()) {\n      const msg = {\n        msg: 'Cannot rotate active shape',\n      };\n      throw msg;\n    }\n\n    let newX;\n    let newY;\n    const newOrientation = (this.orientation + 1) % config.NUMBER_OF_SHAPE_ORIENTATIONS;\n\n    for (let i = 0; i < this.blocks.length; i++) {\n      newX = this.centerX + this.shape.orientation[newOrientation].blockPosition[i].x;\n      newY = this.centerY + this.shape.orientation[newOrientation].blockPosition[i].y;\n      this.blocks[i].moveBlock(newX, newY);\n    }\n    this.orientation = newOrientation;\n    this.isTweening = true;\n  }\n\n  canRotate() {\n    if (this.isTweening) {\n      return false;\n    }\n\n    let newX;\n    let newY;\n    const newOrientation = (this.orientation + 1) % config.NUMBER_OF_SHAPE_ORIENTATIONS;\n\n    for (let i = 0; i < this.blocks.length; i++) {\n      newX = this.centerX + this.shape.orientation[newOrientation].blockPosition[i].x;\n      newY = this.centerY + this.shape.orientation[newOrientation].blockPosition[i].y;\n\n      if (!this.isOnBoard(newX, newY) || this.isOccupied(newX, newY)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  placeShapeInBoard() {\n    let block;\n\n    for (let i = 0; i < this.blocks.length; i++) {\n      block = this.blocks[i];\n      if (this.isOccupied(block.x, block.y)) {\n        this.onBlockOccupied.dispatch();\n      }\n      window.Tetris.board[block.y][block.x] = this.blocks[i];\n    }\n  }\n\n  moveShape(direction) {\n    if (!this.canMoveShape(direction)) {\n      const msg = {\n        msg: `Cannot move active shape in direction: ${direction}`,\n      };\n      throw msg;\n    }\n\n    let newX;\n    let newY;\n\n    for (let i = 0; i < this.blocks.length; i++) {\n      switch (direction) {\n        case config.MOVE_DOWN:\n          newX = this.blocks[i].x;\n          newY = this.blocks[i].y + 1;\n          break;\n        case config.MOVE_LEFT:\n          newX = this.blocks[i].x - 1;\n          newY = this.blocks[i].y;\n          break;\n        case config.MOVE_RIGHT:\n          newX = this.blocks[i].x + 1;\n          newY = this.blocks[i].y;\n          break;\n      }\n      this.blocks[i].moveBlock(newX, newY);\n    }\n\n    switch (direction) {\n      case config.MOVE_DOWN:\n        this.centerX += 0;\n        this.centerY += 1;\n        break;\n      case config.MOVE_LEFT:\n        this.centerX += -1;\n        this.centerY += 0;\n        break;\n      case config.MOVE_RIGHT:\n        this.centerX += 1;\n        this.centerY += 0;\n        break;\n    }\n  }\n\n  canMoveShape(direction) {\n    let newX;\n    let newY;\n\n    for (let i = 0; i < this.blocks.length; i++) {\n      switch (direction) {\n        case config.MOVE_DOWN:\n          newX = this.blocks[i].x;\n          newY = this.blocks[i].y + 1;\n          break;\n        case config.MOVE_LEFT:\n          newX = this.blocks[i].x - 1;\n          newY = this.blocks[i].y;\n          break;\n        case config.MOVE_RIGHT:\n          newX = this.blocks[i].x + 1;\n          newY = this.blocks[i].y;\n          break;\n      }\n      if (!this.isOnBoard(newX, newY) || this.isOccupied(newX, newY)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  isOnBoard(x, y) {\n    if (x >= 0 && y >= 0 &&\n        x < config.BOARD_WIDTH && y < config.BOARD_HEIGHT) {\n      return true;\n    }\n    return false;\n  }\n\n  isOccupied(x, y) {\n    if (window.Tetris.board[y][x] === null) {\n      return false;\n    }\n    return true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/prefabs/Shape.js","import Phaser from 'phaser';\n\nexport default class extends Phaser.State {\n  init() {\n    this.game.stage.backgroundColor = '#000';\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.scale.pageAlignHorizontally = true;\n    this.scale.pageAlignVertically = true;\n\n    this.game.physics.startSystem(Phaser.Physics.ARCADE);\n  }\n\n  create() {\n    this.state.start('Preload');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/states/Boot.js","import Phaser from 'phaser';\nimport TextButton from '../extensions/Textbutton';\n\nexport default class extends Phaser.State {\n  init() {\n    this.game.stage.backgroundColor = '#000';\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.scale.pageAlignHorizontally = true;\n    this.scale.pageAlignVertically = true;\n\n    this.game.physics.startSystem(Phaser.Physics.ARCADE);\n  }\n\n  create() {\n    this.title = new Phaser.Text(this.game, this.game.world.centerX, this.game.world.centerY - 40, 'Simple Tetris', {\n      font: '18px Verdana',\n      fill: 'white',\n      align: 'center',\n    });\n    this.title.anchor.setTo(0.5);\n\n    this.start = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY,\n      asset: null,\n      overFrame: null,\n      outFrame: null,\n      downFrame: null,\n      upFrame: null,\n      label: 'Start',\n      style: {\n        font: '10px Verdana',\n        fill: 'white',\n        align: 'center',\n      },\n    });\n\n    this.source = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY + 20,\n      asset: null,\n      overFrame: null,\n      outFrame: null,\n      downFrame: null,\n      upFrame: null,\n      label: 'View source code',\n      style: {\n        font: '10px Verdana',\n        fill: 'white',\n        align: 'center',\n      },\n    });\n\n    this.start.onInputUp.add(() => {\n      this.state.start('Play');\n    });\n\n    this.source.onInputUp.add(() => {\n      window.open('https://github.com/Galfarx/tetris-web-demo', '_blank');\n    });\n\n    this.menuPanel = this.add.group();\n    this.menuPanel.add(this.title);\n    this.menuPanel.add(this.start);\n    this.menuPanel.add(this.source);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/states/Menu.js","import Phaser from 'phaser';\nimport TextButton from '../extensions/Textbutton';\n\nexport default class extends Phaser.State {\n  init() {\n    this.game.stage.backgroundColor = '#000';\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    this.scale.pageAlignHorizontally = true;\n    this.scale.pageAlignVertically = true;\n\n    this.game.physics.startSystem(Phaser.Physics.ARCADE);\n  }\n\n  create() {\n    this.title = new Phaser.Text(this.game, this.game.world.centerX, this.game.world.centerY - 40, 'Game Over', {\n      font: '18px Verdana',\n      fill: 'white',\n      align: 'center',\n    });\n    this.title.anchor.setTo(0.5);\n\n    this.start = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY,\n      asset: null,\n      overFrame: null,\n      outFrame: null,\n      downFrame: null,\n      upFrame: null,\n      label: 'Play again',\n      style: {\n        font: '10px Verdana',\n        fill: 'white',\n        align: 'center',\n      },\n    });\n\n    this.menu = new TextButton({\n      game: this.game,\n      x: this.game.world.centerX,\n      y: this.game.world.centerY + 20,\n      asset: null,\n      overFrame: null,\n      outFrame: null,\n      downFrame: null,\n      upFrame: null,\n      label: 'Menu',\n      style: {\n        font: '10px Verdana',\n        fill: 'white',\n        align: 'center',\n      },\n    });\n\n    this.start.onInputUp.add(() => {\n      this.state.start('Play');\n    });\n\n    this.menu.onInputUp.add(() => {\n      this.state.start('Menu');\n    });\n\n    this.menuPanel = this.add.group();\n    this.menuPanel.add(this.title);\n    this.menuPanel.add(this.start);\n    this.menuPanel.add(this.menu);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/states/Over.js","import Phaser from 'phaser';\nimport Shape from '../prefabs/Shape';\n\nimport config from '../config';\n\nexport default class extends Phaser.State {\n  init() {\n    this.cursors = this.game.input.keyboard.createCursorKeys();\n  }\n\n  create() {\n    window.Tetris.shapesJSON = this.game.cache.getJSON('shapes');\n    window.Tetris.shapes = window.Tetris.shapesJSON.shapes;\n\n    window.Tetris.board = new Array(config.BOARD_HEIGHT);\n    for (let i = 0; i < config.BOARD_HEIGHT; i++) {\n      window.Tetris.board[i] = new Array(this.BOARD_WIDTH);\n      for (let j = 0; j < config.BOARD_WIDTH; j++) {\n        window.Tetris.board[i][j] = null;\n      }\n    }\n\n    this.turnLength = 60;\n    this.turnCounter = 0;\n\n    this.completedRows = [];\n    this.isUpdatingAfterRowClear = false;\n\n    this.nextShape = new Shape();\n    this.nextShape.createRandomShape();\n\n    this.activeShape = new Shape();\n    this.activeShape.createRandomShape();\n    this.activeShape.activate();\n  }\n\n  update() {\n    if (this.turnCounter >= this.turnLength) {\n      if (this.activeShape !== null && this.activeShape.canMoveShape(config.MOVE_DOWN)) {\n        this.activeShape.moveShape(config.MOVE_DOWN);\n      } else {\n        this.activeShape.placeShapeInBoard();\n        this.completedRows = this.getCompleteRows();\n        if (this.completedRows.length > 0) {\n          this.clearRow(this.completedRows);\n          this.isUpdatingAfterRowClear = true;\n        } else {\n          this.promoteShapes();\n        }\n        this.completedRows = [];\n      }\n      this.turnCounter = 0;\n    } else if (this.isUpdatingAfterRowClear) {\n      if (this.turnCounter >= this.turnLength / 10) {\n        this.isUpdatingAfterRowClear = false;\n        this.promoteShapes();\n      } else {\n        this.turnCounter++;\n      }\n    } else {\n      this.handleInput();\n      this.turnCounter++;\n    }\n  }\n\n  handleInput() {\n    if (this.activeShape.isTweening) {\n      this.activeShape.updateTween();\n    } else if (this.cursors.up.isDown) {\n      if (this.activeShape.canRotate()) {\n        this.activeShape.rotate();\n      }\n    } else if (this.cursors.left.isDown) {\n      if (this.activeShape.canMoveShape(config.MOVE_LEFT)) {\n        this.activeShape.moveShape(config.MOVE_LEFT);\n        this.activeShape.isTweening = true;\n      }\n    } else if (this.cursors.right.isDown) {\n      if (this.activeShape.canMoveShape(config.MOVE_RIGHT)) {\n        this.activeShape.moveShape(config.MOVE_RIGHT);\n        this.activeShape.isTweening = true;\n      }\n    } else if (this.cursors.down.isDown) {\n      this.turnCounter += this.turnLength / 5;\n    }\n  }\n\n  promoteShapes() {\n    if (this.activeShape.onBlockOccupied.has(this.gameOver)) {\n      this.activeShape.onBlockOccupied.remove(this.gameOver);\n    }\n    this.activeShape = null;\n    this.activeShape = this.nextShape;\n    this.activeShape.onBlockOccupied.add(this.gameOver);\n    this.activeShape.activate();\n\n    this.nextShape = new Shape();\n    this.nextShape.createRandomShape();\n  }\n\n  getCompleteRows() {\n    const completeRows = [];\n\n    for (let i = 0; i < window.Tetris.board.length; i++) {\n      if (this.isRowFull(i)) {\n        completeRows.push(i);\n      }\n    }\n    return completeRows;\n  }\n\n  isRowFull(row) {\n    for (let i = 0; i < window.Tetris.board[row].length; i++) {\n      if (window.Tetris.board[row][i] === null) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  clearRow(completedRows) {\n    let row;\n    let actualRowToClear;\n    let alreadyShifted = 0;\n\n    for (let i = completedRows.length - 1; i >= 0; i--) {\n      actualRowToClear = completedRows[i] + alreadyShifted;\n\n      row = window.Tetris.board[actualRowToClear];\n\n      for (let j = 0; j < row.length; j++) {\n        window.Tetris.board[actualRowToClear][j].clean();\n        window.Tetris.board[actualRowToClear][j] = null;\n      }\n      this.dropRowsAbove(actualRowToClear - 1);\n      alreadyShifted++;\n    }\n  }\n\n  dropRowsAbove(row) {\n    let block;\n\n    for (let i = row; i >= 0; i--) {\n      for (let j = 0; j < window.Tetris.board[i].length; j++) {\n        block = window.Tetris.board[i][j];\n        if (block !== null) {\n          window.Tetris.board[i][j].moveBlock(block.x, block.y + 1);\n          window.Tetris.board[i + 1][j] = window.Tetris.board[i][j];\n          window.Tetris.board[i][j] = null;\n        }\n      }\n    }\n  }\n\n  gameOver() {\n    window.Tetris.game.state.start('Over');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/states/Play.js","import Phaser from 'phaser';\nimport config from '../config';\n\nexport default class extends Phaser.State {\n\n  preload() {\n    this.load.spritesheet('block', 'assets/blocks_spritesheet.png', config.BLOCK_SIDE_LENGTH, config.BLOCK_SIDE_LENGTH);\n    this.load.image('background', 'assets/background.png');\n\n    this.load.json('shapes', 'assets/shapes.json');\n  }\n\n  create() {\n    this.state.start('Menu');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/states/Preload.js","export { default as Boot } from './Boot';\nexport { default as Preload } from './Preload';\nexport { default as Menu } from './Menu';\nexport { default as Play } from './Play';\nexport { default as Over } from './Over';\n\n\n\n// WEBPACK FOOTER //\n// ./src/states/index.js"],"sourceRoot":""}